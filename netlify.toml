[build]
publish = "."
command = ""

# Route admin correctly
[[redirects]]
from = "/Sawrites-admin/*"
to = "/Sawrites-admin/index.html"
status = 200

# Redirect Identity callbacks (invite/reset) to admin
[[redirects]]
from = "/.netlify/identity/*"
to = "/Sawrites-admin/"
status = 200

# SPA fallback (homepage)
[[redirects]]
from = "/*"
to = "/index.html"
status = 200

# Security headers (global)
[[headers]]
for = "/*"
[headers.values]
X-Frame-Options = "DENY"
X-Content-Type-Options = "nosniff"
Referrer-Policy = "same-origin"
Permissions-Policy = "camera=(), microphone=(), geolocation=(), display-capture=()"
# Allow CMS + Identity connections and fix EvalError
Content-Security-Policy = "default-src 'self'; img-src 'self' data:; style-src 'self' 'unsafe-inline'; script-src 'self' 'unsafe-eval' https://unpkg.com https://identity.netlify.com; connect-src 'self' https://identity.netlify.com https://api.netlify.com; frame-ancestors 'none'"

# Donâ€™t cache content page
[[headers]]
for = "/content.html"
[headers.values]
Cache-Control = "no-store"
